print("fucked by shadow")

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local MainWindow = Rayfield:CreateWindow({
   Name = "Shadow Hub | Mobile",
   Icon = 0,
   LoadingTitle = "Shadow Hub Loading...",
   LoadingSubtitle = "by Shadow",
   Theme = "Ocean", 
   ConfigurationSaving = { Enabled = true, FolderName = "ShadowHub", FileName = "config" },
   KeySystem = true, 
   KeySettings = {
      Title = "Shadow Hub | Key System",
      Subtitle = "Enter the access key",
      Note = "The key is: main",
      FileName = "ShadowKey", 
      SaveKey = true, 
      Key = {"main"}
   }
})

local MainTab = MainWindow:CreateTab("Main", 4483362458)
local CombatTab = MainWindow:CreateTab("Combat", 4483362458)

-- Variables
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- Combat Config
local AimlockEnabled = false
local TeamCheck = true
local LockPart = "Head" -- Can change to "HumanoidRootPart"

-- Movement Config
local SpeedEnabled, WalkSpeedValue = false, 16
local Flying, FlySpeed = false, 50
local InfJumpEnabled = false

-- FUNCTIONS
local function GetClosestEnemy()
    local Target = nil
    local ShortestDistance = math.huge

    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer and Player.Character and Player.Character:FindFirstChild(LockPart) then
            -- Death Check
            local Humanoid = Player.Character:FindFirstChildOfClass("Humanoid")
            if not Humanoid or Humanoid.Health <= 0 then continue end
            
            -- Team Check
            if TeamCheck and Player.Team == LocalPlayer.Team then continue end

            -- Get Screen Position
            local Pos, OnScreen = Camera:WorldToViewportPoint(Player.Character[LockPart].Position)
            
            if OnScreen then
                local Distance = (Vector2.new(Pos.X, Pos.Y) - Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)).Magnitude
                if Distance < ShortestDistance then
                    Target = Player
                    ShortestDistance = Distance
                end
            end
        end
    end
    return Target
end

-- COMBAT TAB
CombatTab:CreateToggle({
   Name = "Enable Aimlock (Through Walls)",
   CurrentValue = false,
   Callback = function(Value)
       AimlockEnabled = Value
   end,
})

CombatTab:CreateToggle({
   Name = "Team Check",
   CurrentValue = true,
   Callback = function(Value)
       TeamCheck = Value
   end,
})

CombatTab:CreateDropdown({
   Name = "Aim Part",
   Options = {"Head", "HumanoidRootPart"},
   CurrentOption = {"Head"},
   MultipleOptions = false,
   Callback = function(Option)
       LockPart = Option[1]
   end,
})

-- MAIN TAB (Movement Features)
MainTab:CreateToggle({
   Name = "Enable Speed",
   CurrentValue = false,
   Callback = function(Value)
       SpeedEnabled = Value
       if not Value and LocalPlayer.Character then LocalPlayer.Character.Humanoid.WalkSpeed = 16 end
   end,
})

MainTab:CreateSlider({
   Name = "Speed Amount",
   Range = {16, 500},
   Increment = 1,
   CurrentValue = 16,
   Callback = function(Value) WalkSpeedValue = Value end,
})

MainTab:CreateToggle({
   Name = "Infinite Jump",
   CurrentValue = false,
   Callback = function(Value) InfJumpEnabled = Value end,
})

-- LOOPS
RunService.RenderStepped:Connect(function()
    -- Aimlock Logic
    if AimlockEnabled then
        local Target = GetClosestEnemy()
        if Target and Target.Character and Target.Character:FindFirstChild(LockPart) then
            -- Smoothly interpolate camera to target
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, Target.Character[LockPart].Position)
        end
    end

    -- Movement Logic
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        if SpeedEnabled then
            LocalPlayer.Character.Humanoid.WalkSpeed = WalkSpeedValue
        end
    end
end)

-- Jump Logic
game:GetService("UserInputService").JumpRequest:Connect(function()
    if InfJumpEnabled and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)
