print("fucked by shadow")

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local MainWindow = Rayfield:CreateWindow({
   Name = "Shadow Hub | Mobile",
   Icon = 0,
   LoadingTitle = "Shadow Hub Loading...",
   LoadingSubtitle = "by Shadow",
   Theme = "Ocean", 
   ConfigurationSaving = { Enabled = true, FolderName = "ShadowHub", FileName = "config" },
   KeySystem = true, 
   KeySettings = {
      Title = "Shadow Hub | Key System",
      Subtitle = "Key is: main",
      Note = "Join the discord for keys",
      FileName = "ShadowKey", 
      SaveKey = true, 
      Key = {"main"}
   }
})

local MainTab = MainWindow:CreateTab("Main", 4483362458)
local CombatTab = MainWindow:CreateTab("Combat", 4483362458)

-- Services & Variables
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- Combat Settings
local AimlockEnabled = false
local TeamCheck = true
local LockPart = "Head"
local AimFOV = 150 -- Size of the lock-on circle

-- Movement Settings
local SpeedEnabled, WalkSpeedValue = false, 16
local InfJumpEnabled = false

-- FOV Circle Visual
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 2
FOVCircle.Color = Color3.fromRGB(0, 150, 255)
FOVCircle.Filled = false
FOVCircle.Transparency = 1
FOVCircle.Visible = false

-- FUNCTIONS
local function GetClosestToCursor()
    local Target = nil
    local ShortestDistance = AimFOV

    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer and Player.Character and Player.Character:FindFirstChild(LockPart) then
            -- Check Health & Team
            local Hum = Player.Character:FindFirstChildOfClass("Humanoid")
            if not Hum or Hum.Health <= 0 then continue end
            if TeamCheck and Player.Team == LocalPlayer.Team then continue end

            local Pos, OnScreen = Camera:WorldToViewportPoint(Player.Character[LockPart].Position)
            
            if OnScreen then
                -- Calculate distance from mouse/center of screen
                local MousePos = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
                local Distance = (Vector2.new(Pos.X, Pos.Y) - MousePos).Magnitude
                
                if Distance < ShortestDistance then
                    Target = Player
                    ShortestDistance = Distance
                end
            end
        end
    end
    return Target
end

-- COMBAT UI
CombatTab:CreateToggle({
   Name = "Aimlock (Closest to Cursor)",
   CurrentValue = false,
   Callback = function(Value)
       AimlockEnabled = Value
       FOVCircle.Visible = Value
   end,
})

CombatTab:CreateSlider({
   Name = "Aim FOV (Lock Radius)",
   Range = {50, 800},
   Increment = 10,
   CurrentValue = 150,
   Callback = function(Value)
       AimFOV = Value
       FOVCircle.Radius = Value
   end,
})

CombatTab:CreateToggle({
   Name = "Team Check",
   CurrentValue = true,
   Callback = function(Value) TeamCheck = Value end,
})

-- MAIN UI
MainTab:CreateToggle({
   Name = "Enable Speed",
   CurrentValue = false,
   Callback = function(V) SpeedEnabled = V end,
})

MainTab:CreateSlider({
   Name = "Speed Amount",
   Range = {16, 500},
   Increment = 1,
   CurrentValue = 16,
   Callback = function(V) WalkSpeedValue = V end,
})

MainTab:CreateToggle({
   Name = "Infinite Jump",
   CurrentValue = false,
   Callback = function(V) InfJumpEnabled = V end,
})

-- MAIN LOOP
RunService.RenderStepped:Connect(function()
    -- Update FOV Circle Position
    FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    FOVCircle.Radius = AimFOV

    if AimlockEnabled then
        local Target = GetClosestToCursor()
        if Target and Target.Character and Target.Character:FindFirstChild(LockPart) then
            -- Snaps camera to target
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, Target.Character[LockPart].Position)
        end
    end

    if SpeedEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = WalkSpeedValue
    end
end)

-- Jump Logic
game:GetService("UserInputService").JumpRequest:Connect(function()
    if InfJumpEnabled and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)
